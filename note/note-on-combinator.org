#+TITLE:  note on combinator
#+AUTHOR: XIE Yuheng
#+EMAIL:  xyheme@gmail.com


* TODO
  * 整理格式
    在不需要順序的列表之處
    把 1. 2. 3. 改爲 * * *
  * 嘗試形成一種新的比喻
    * 是否應該
      直接使用 組合子 這個名字
      然後具體的描述其行爲
      而讓讀者自己想像其比喻呢
    * 使用可以相互結合的精靈來比喻嗎
    * 用細胞來比喻嗎
* 題記
  * 內容來自 老頑童 smullyan 之組合子問答集
    但是我並不用鳥來做比喻了
    鳥的比喻中只有 函數作用 這一種操作
    限制操作方式
    對於研究空間的整體性質是有價值的
    但是對於設計一般性的語言而言
    則沒有一點兒好處
  * 所以
    以明顯的方式用棧
    追求理解的簡單性和具體性
    只要有形式上的運算律
    就能夠對代碼進行變換
    而不再追求形式上的單純性
  * 將獲得的最重要的特點是
    [比諸 lambda-calculus[木答演算]]
    計算的順序是被明指
    等號 在木答演算中的意義是無向路
    而這裏
    必須避免對這種迷失方向的無向路之使用
* 序
  * 皖有頑童 其名爲恆
  * 組合子的空間
    注意在不同的問題中
    在不同的條件下這個空間是變化的
  * 鳥各有性 一類一名
  * 小寫字母以表之無類
    大寫字母或中文以表之有類
  * 命名依組合子的行爲
    而 蟬語[或 lambda-calculus] 中
    對約束變元的命名是爲了標記
    以描述函數體的內部結構
* 引
  * 數據類型是
    * 符號
    * 無名組合子
  * 對數據類型的操作如下
  * 命名
    核心語義之一
    用以 把 匿名組合子 與 符號 綁定
    綁定之後 這個符號的語義就是 有名組合子
    有名組合子 和 無名組合子 統稱爲 組合子
  * 製作匿名組合子
    核心語義之一
    一種標記語言 以形成有向圖
    用 [ ] 這個 borderfix notation
    對應與語圖中的多邊形
    我也不確定應該如何比喻
    具體地
    它對入棧一個用雙向鏈接的鏈表實現的樹
    樹中的某些位置可以被標記語言鏈接到其他地方
    注意
    用以嵌套以形成樹的
    有三種 括號 [ ] { } ( )
    所以在實現的時候一定要加標籤
    因爲 [ ] 會直接入棧數據
    而 { } ( ) 不是直接入棧數據
  * 作用
    核心語義之一
    以 ( ) 這這個 borderfix notation
    來表示之
    其可以作用於 組合子
    我也不確定應該如何比喻
    但是具體地
    * 在語圖中 用小圈表示
    * 由名找到組合子之體
      組合子之體 的作用效果是
      代入 並 依次執行
    * ( ) = [ ] (apply) (apply)
      這個等價變換有時循環
      比如
      (apply) = [ apply ] (apply) (apply) = apply (apply)
      所以這個[從到右的]變換 並不爲解釋器所用
      只爲人的理解
    * { } = [ ] (apply)
      { } 這個 borderfix notation
      將對應於語圖中的大圈
      這個[從到右的]變換 是可以爲解釋器所用的
  * 複合
    這個操作是 製作匿名組合子 的一種特殊情況而已
    也就是說 複合 並不是 核心語義
  * 這樣就完全具體了
    但是
    注意
    在之後的閱讀中
    有的時候需要對構造函數的方式做限制
    這都是爲了觀察在限制下空間有什麼性質而已
* 嘲嘲
** 1 嘲嘲不已 戀戀然
   * 一鳥兒名 嘲
     mockingbird
     x (M)  =  x (x)
     [ :x (:x) ]
   * B (A)  =  B
     A 喜歡 B  ^-^
   * 公理
     鳥的林子 就函數複合封閉
     蟬語將此公理內化於語法矣 [ (A) (B) ]
     此一內化省一名耳
     也省去了每每對此條件之聲明
   * 公理
     林子裏存在一只 嘲
   * 傳言
     林子中的每只鳥兒心中都喜歡着某一只鳥兒 ^-^
     真的嗎 ?
     試以 嘲 尋證之
*** 解
    * 然也
      解 _ (F)  =  _ 即可
      設 _ 爲 _ (x) 而
      解 _ (x) (F)  =  _ (x) 即可
      無窮 (F) (F) (F) ... 其形似所求之解
      可以 M 造無窮 (F) 如此如此
      #+begin_src cicada
      [ (M) (F) ] (M) (F) =
      [ (M) (F) ] (M) (F) (F)
      因
      [ (M) (F) ] (M) =
      [ (M) (F) ] ([ (M) (F) ]) =
      [ (M) (F) ] (M) (F)
      更知
      [ (M) (F) ] (M) =
      [ (M) (F) ] (M) (F) =
      [ (M) (F) ] (M) (F) (F)
      #+end_src
      故而 [ (M) (F) ] (M) (F) 即爲   (x)
      而   [ (M) (F) ] (M)     亦可爲 (x)
    * 但知此解徒有形式
      而不可爲編程之用
      因其作用無窮不已耳
    * 又知 _ (F) 之釋義有二
      一爲 x (F) 稱 作用
      一爲 (x) (F) 稱 複合
      若慾求解 必釋之爲 複合
** 恆子曰
   * 有名者示之如 B (A)
     一說一聽也
     無名者示之如
     [ (M) (F) ] ([ (M) (F) ]) =
     [ (M) (F) ] (M) (F)
     一說一聽也
** 2 自戀
   * egocentric narcissistic
     林子中有自戀之鳥嗎 ?
*** 解
    1. E  =  E (M)  =  E (E)
** 3 佳
   1. agreeable
      任 B 有 x
      x (A)  ==  x (A) (B)
      A 與 B 認同 x
      於每個鳥都有所認同者 稱佳
      以佳之存在爲條件
      亦可證明
      林子中的每只鳥兒心中都喜歡着某一只鳥兒 ?
*** 解
    1. x (A)  ==  x (A) (F)
       x (A) 即爲所求
       比之與 (M)
       [ (M) (F) ] (M)  ==  [ (M) (F) ] (M) (F)
    2. 嘲即爲佳
       佳爲轉爲解此等式而弱化條件所得
       弱化條件反而得更簡之解邪
       只因識問之要害也
** 4 佳之親善
   1. 設 (C)  =  (B) (A)
      則 C 佳 而 A 佳 乎 ?
*** 解
    1. 然也
       有 y (C)  =  y (F)
       又 x (B)  =  x
       而 y (B) (A)  =  y (F)
       得 y x (B) (A)  =  y x (F)
       y x (A)  =  y x (F)
       y x 即 A 與 F 所認同者
** 5 複合複合
   1. (C) (B) (A) 者
      因內化複合於蟬語之語法而化此問爲無
** 6 容
   1. compatible
      以 M 解
      x (A)  =  y
      y (B)  =  x
      得解者 稱 A B 容
*** 解
    1. y (B) (A)  =  y
       以解的 y
       代回解得 x
** 7 樂
   1. 與己容者 稱樂
      x (A)  =  y
      y (A)  =  x
      有心上之人[鳥]者必樂
      證明之
*** 解
    1. 設 a (A)  =  a
       以解 x y
       x y 者 a 也
       需證邪
** 8 常
   1. 有心上之人[鳥]者 稱常
      常必樂
      不以 嘲 尋 樂
      亦不以 嘲 尋 常
      試證
      如若有一樂 必有一常
*** 解
    1. x (A)  =  y
       y (A)  =  x
       x (A) (A)  ==  x
       (A) (A) 爲所尋之常也
** 9 自絕戀
   1. hopelessly egocentric
      A (A)  =  A 者 自戀
      x (A)  =  A 者 自絕戀
      x (A)  =  B 者 稱 A 恆於 B
      y ( x (K) )  =  x
      即 x (K) 恆於 x
      K 之型以表分支也
      - 這裏 curry 了
        返回了函數而使得表達式變得難看了
        但是其實這是有名於無名之分
        分之恰到好處
        無所謂美醜也
      試以 M K 尋一自絕戀者
*** 解
    1. K 所戀者是也
** 10 恆者戀者
   1. 如若 x 恆於 y
      則 x 必戀 y
** 11 K 之性質
   1. 若 K (K)  =  K
      則 K 自絕戀
** 12 再 K 之性質
   1. 若 x (K) 自戀
      則 K 必戀 x
*** 解
    1. x  =  [ x (k) ] ( x (k) )  =  x (k)
** 13 簡單的練習
   1. 如若 A 自絕戀
      則 x (A)  =  y (A)
** 14 另一個練習
   1. 如若 A 自絕戀
      則 y ( x (A) )  =  A
** 15 自絕戀是傳染的
   1. A 自絕戀
      則 x (A) 自絕戀
** 16 K 可以被消去
   1. x (K)  =  y (K)
      則 再作用於任意一值
      而知 x = y
** 17 恆者 必恆於一
   1. 如若
      x (A) = B
      x (A) = C
      則 B = B
** 18 K 之消去
   1. 若 K 戀 x (K)
      則 K 戀 x
      x (K) (K) = x (K)
      消去 (K) 即可
** 19 孤獨
   1. 自絕戀 之 K 必 極孤獨
      真的嗎 ?
*** 解
    1. 此時空間中只有一個 K 而不能有其他鳥
       因爲
       x  =  y ( x (K) )  =  K
       x 是林子中的任意一鳥
** 20 若傻爲佳 則戀戀然
   1. x (I) = x
      戀所有之鳥者也
   2. 如若 I 爲佳
      則不必有更多條件
      立即可知林子中 戀戀然 之狀態
      因
      任意 y 存在 x
      x = x (I) = x (y)
** 21 若戀戀然 則傻爲佳
   1. 這也由同樣的等式得出
      x (I) = x = x (y)
** 22 容容然
   1. 知其林容容然
      又知有一傻
      則
      其林樂樂然[常常然]乎
      其傻爲佳乎
*** 解
    1. 容容然 知
       x (B) (A) = x 可解
       就 傻而解
       得 林之樂樂然
    2. 而 若戀戀然 則傻爲佳
       故傻爲佳
** 23 傻自絕戀
   1. 傻自絕戀則孤獨
      x = x (I) = (I)
** 24 靈
   1. lark
      y ( x (L) ) = y (y) (x)
   2. 由 L 和 I
      可得 M
*** 解
    1. I (L) 爲 M
       左爲 [ .y (:y) (I) ]
       右爲 [ .y (:y) ]
       知之
** 25 有靈而戀戀然
   1. 有靈而戀戀然
      戀戀然而常
      常而樂
   2. 下面各問
      直至結尾
      皆不用函數複合
      此靈之所用矣
*** 解
    1. [ F (L) ] ( F (L) )
       [ F (L) ] ( F (L) ) (F)
** 26 靈自絕戀 則無不戀靈
   1. L ( x (L) ) = L (L) = L
      L ( x (L) ) = L (L) (x) = L (x)
** 27 如若靈不K 而K不靈 則靈不戀K
   1. 若有 K (L) = K
      則再作以 y 得
      y (K (L)) = y (K)
      y (y) (K) = y (K)
      而 (K) 可消
      故得 y (y) = y
      即林中之鳥皆自戀
      代入以 K 得
      K (K) = K
      K 自戀則自絕戀 如下
      K = x (K (K)) = x (K)
      而 K 自絕戀
      則 K 爲林中獨鳥耳
      與 L 之存在矛盾
** 28 如若靈不K 而K不靈 若而有K戀靈 則無不戀靈
   1. 此又是一例弱化條件而得相同結論
   2. K 所戀者 自絕戀矣
      故 靈自絕戀
      而靈自絕戀 則無不戀靈
** 29 若只有靈則必有自戀者
   1. 此爲以靈尋自戀者之遊戲也
      只用作用不用複合
   2. 其實複合也是可以的
      只要複合之後被作用掉
      而不被認爲是作爲返回值的函數就行了
      - 而
        其實本身在蟬語中
        函數複合之語義就是
        複合之後 馬上作用
   3. 所尋者 x (x) = x 也
      靈者
      可示之以 [ [ .x (:x) (.:f) ] ]
      這與之前解的第一個方形式上類似
      但是實際上變量之間多了依賴關係
      而大不同
   4. 代 x 以 x (x)
      x (x) ( x (x) ) = x (x)
      我斷言
      此 x 爲 L 之所戀者
      依照之前所敘述的解所戀者之法
      由 L 解出這個 x 即可
* 愛神
  1. 知衆之所戀者 爲愛神
  2. 這裏 smullyan 不得不把函數複合作爲一個前綴函數來處理
     即把 與 M 的複合 即爲函數 A 的作用
     用 A M F 與函數作用求 _ (F) = _
     我用 M F 與函數作用還有函數複合求 _ (F) = _ 即可
     即 對我來說 [ (M) (F) ] 顯然也在森林裏
  3. 其實更細化的 由 M 的性質知這裏的 A 其實爲 L
     所求爲 (L) (M) 或 [ (L) (M) ]
* 豐
